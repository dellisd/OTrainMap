(()=>{"use strict";var e={4943:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});const n=a.p+"images/4c835d0e5f5d2396190bca5514ee7826-confederation.svg"},5921:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});const n=a.p+"images/44a4fc1517928e38cbbb19e5810ce16c-label.svg"},4037:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});const n=a.p+"images/d3f95968fdd836be72f8024bcc65194b-logoDark.svg"},3864:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});const n=a.p+"images/8a3f225facad69ea0aafb53ddb6968ce-logoLight.svg"},7400:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});const n=a.p+"images/078363632f0e46eb39348f284600cef8-trillium.svg"},6158:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const r=n(a(1593)),l=n(a(7794)),o=a(8157),i=a(4984),s=a(3809),c=a(7064),d=a(253),u=a(3150),p=a(7534),f=a(3625),m=a(4364),h=a(8127),y=a(1151),g=a(8001),b=a(4055),v=p.configureStore({reducer:u.reducer,preloadedState:(()=>{var e;let t=null!==(e=localStorage.settings&&JSON.parse(localStorage.settings))&&void 0!==e?e:u.initialState;return h.produce(t,(e=>{var t,a,n,r,l,o,i;const s=new URLSearchParams(location.search);((null===(t=s.get("stage3"))||void 0===t?void 0:t.includes("true"))||(null===(a=s.get("kanata"))||void 0===a?void 0:a.includes("true")))&&(e.lines.kanataExtension=!0),(null===(n=s.get("barrhaven"))||void 0===n?void 0:n.includes("true"))&&(e.lines.barrhavenExtension=!0),(null===(r=s.get("map"))||void 0===r?void 0:r.includes("satellite"))?e.mapStyle="satellite":(null===(l=s.get("map"))||void 0===l?void 0:l.includes("vector"))&&(e.mapStyle="vector"),(null===(o=s.get("theme"))||void 0===o?void 0:o.includes("light"))?e.appTheme="light":(null===(i=s.get("theme"))||void 0===i?void 0:i.includes("dark"))&&(e.appTheme="dark")}))})()});v.subscribe((()=>{const{targetZoom:e,drawerOpen:t,shareSheetOpen:a,...n}=v.getState();localStorage.settings=JSON.stringify(n)})),t.App=()=>r.default.createElement(f.Provider,{store:v},r.default.createElement(S,null));const w=l.default.div`
  display: flex;
  width: 100%;
  height: 100%;
`,S=f.connect((e=>({appTheme:e.appTheme})))((e=>{const t=o.useMediaQuery("(prefers-color-scheme: dark)"),a=r.default.useMemo((()=>{const a="system"===e.appTheme&&t||"dark"===e.appTheme;return s.themeFactory(a)}),[t,e.appTheme]);return r.default.createElement(o.MuiThemeProvider,{theme:a},r.default.createElement(y.ProvideData,null,r.default.createElement(g.ProvideHash,null,r.default.createElement(b.ProvideWindow,null,r.default.createElement(w,null,r.default.createElement(i.OverviewMap,null),r.default.createElement(c.Controls,null),r.default.createElement(d.SettingsDrawer,null),r.default.createElement(m.Logo,null))))))}))},5709:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.cities=void 0,t.cities={ottawa:{location:[-75.691042,45.420472],data:["ottawa/belfastYard.json","ottawa/greenbankYard.json","ottawa/moodieYard.json","ottawa/walkleyYard.json","ottawa/line1.json","ottawa/line3.json","ottawa/line4.json","ottawa/line2.json","ottawa/line5.json","ottawa/line6.json","ottawa/stage3barrhaven.json","ottawa/stage3kanata.json"]},toronto:{location:[-79.3848,43.65354],data:["toronto/line1.json","toronto/line2.json","toronto/line3.json","toronto/line4.json"]}}},3809:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.themeFactory=void 0;const n=a(8157);t.themeFactory=(e=!1)=>n.createMuiTheme({palette:e?l:r});const r={type:"light",primary:{main:"#cc0000"},secondary:{main:"#cc0000"}},l={type:"dark",primary:{main:"#ff4f30"},secondary:{main:"#ff4f30"}}},4203:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useIsDarkTheme=t.initialViewState=void 0;const n=a(8157);t.initialViewState=()=>{const e=location.hash.substr(1).split("/");let t=null;const a=parseFloat(e[0]),n=parseFloat(e[1]),r=parseFloat(e[2]);if(isNaN(a)||isNaN(n)||isNaN(r))return null;t={zoom:a,latitude:n,longitude:r};const l=parseFloat(e[3]);isNaN(l)||(t={...t,bearing:l});const o=parseFloat(e[4]);return isNaN(o)||(t={...t,pitch:o}),t},t.useIsDarkTheme=e=>{const t=n.useMediaQuery("(prefers-color-scheme: dark)");return"system"===e&&t||"dark"===e}},148:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.MapIcon=void 0;const o=l(a(1593)),i=a(302);t.MapIcon=({width:e,height:t,...a})=>{const{map:n}=o.useContext(i.MapContext),r=o.useRef(new Image(e,t));return o.useEffect((()=>{const e=r.current;e.onload=()=>{console.log(e),n.on("styledata",(()=>{n.hasImage(a.id)||n.addImage(a.id,e)}))},e.src=a.url}),[a.style]),o.default.createElement(o.default.Fragment,null)}},2959:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Line=void 0;const o=l(a(1593)),i=a(302),s=a(4984);t.Line=o.default.memo((({name:e,data:t,color:a,offset:n,highContrastLabels:r})=>{const{labelStyle:l}=o.useContext(s.LabelProviderContext);return o.default.createElement(i.Source,{id:e,type:"geojson",data:t},o.default.createElement(i.Layer,{id:`${e}-tunnel`,beforeId:"content-mask",type:"fill",filter:["all",["==",["get","alternatives"],null],["==",["get","type"],"tunnel"]],minzoom:14,paint:{"fill-color":"#212121","fill-opacity":["interpolate",["linear"],["zoom"],14,0,15,.3]}}),o.default.createElement(i.Layer,{id:`${e}-tracks`,beforeId:"content-mask",type:"line",filter:["all",["==",["get","alternatives"],null],["==",["get","type"],"tracks"]],layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":a,"line-width":3,"line-offset":3*n}}),o.default.createElement(i.Layer,{id:`${e}-tracks-future`,beforeId:"content-mask",type:"line",filter:["all",["==",["get","alternatives"],null],["==",["get","type"],"tracks-future"]],layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":a,"line-width":3,"line-dasharray":[3,3]}}),o.default.createElement(i.Layer,{id:`${e}-overpass`,beforeId:"content-mask",type:"line",filter:["all",["==",["get","alternatives"],null],["==",["get","type"],"overpass"]],minzoom:14,layout:{"line-join":"round","line-cap":"butt"},paint:{"line-color":a,"line-width":1,"line-gap-width":["interpolate",["exponential",2],["zoom"],15,0,18,15],"line-offset":3*n}}),o.default.createElement(i.Layer,{id:`${e}-platforms`,beforeId:"content-mask",type:"fill",filter:["all",["==",["get","alternatives"],null],["==",["get","type"],"station-platforms"]],paint:{"fill-color":a,"fill-opacity":.68}}),o.default.createElement(i.Layer,{id:`${e}-platforms-future`,beforeId:"content-mask",type:"line",filter:["all",["==",["get","alternatives"],null],["==",["get","type"],"station-platforms-future"]],paint:{"line-color":a,"line-dasharray":[3,3],"line-width":1.5}}),o.default.createElement(i.Layer,{id:`${e}-station`,beforeId:"circle-mask",type:"circle",filter:["all",["==",["get","alternatives"],null],["==",["get","type"],"station-label"]],layout:{},paint:{"circle-color":"#ffffff","circle-stroke-color":"#212121","circle-stroke-width":2,"circle-radius":["interpolate",["linear"],["zoom"],10,2,13.5,6]}}),o.default.createElement(i.Layer,{id:`${e}-labels`,beforeId:"symbol-mask",type:"symbol",filter:["all",["==",["get","alternatives"],null],["==",["get","type"],"station-label"]],minzoom:11,layout:{"text-field":l,"text-anchor":"left","text-offset":[.75,0],"text-font":["Raleway Bold"],"text-size":16,"icon-image":"label-background","icon-text-fit":"both","icon-text-fit-padding":[1,4,0,4]},paint:{"text-color":"#FFFFFF"}}),o.default.createElement(i.Layer,{id:`${e}-labels-major`,beforeId:"symbol-mask",type:"symbol",filter:["all",["==",["get","type"],"station-label"],["==",["get","major"],!0],["==",["get","alternatives"],null]],maxzoom:11,minzoom:9,layout:{"text-field":l,"text-anchor":"left","text-offset":[.75,0],"text-font":["Raleway Bold"],"text-size":16,"icon-image":"label-background","icon-text-fit":"both","icon-text-fit-padding":[1,4,0,4]},paint:{"text-color":"#FFFFFF"}}))}))},4364:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Logo=void 0;const r=n(a(1593)),l=a(4203),o=a(8157),i=n(a(3864)),s=n(a(4037)),c=a(3625),d=o.makeStyles((e=>({root:{position:"fixed",width:140,bottom:e.spacing(2),left:"calc(50% - 70px)"}})));t.Logo=c.connect((e=>({appTheme:e.appTheme})))((e=>{const t=d(),a=l.useIsDarkTheme(e.appTheme);return r.default.createElement("a",{href:"https://www.railfans.ca"},r.default.createElement("img",{src:a?s.default:i.default,className:t.root}))}))},4984:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return r(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.OverviewMap=t.OverviewMapComponent=t.LINE_OFFSET=t.LabelProviderContext=void 0;const i=l(a(1593)),s=l(a(302)),c=o(a(7794));a(2611);const d=a(2959),u=a(3098),p=a(3150),f=a(3625),m=a(4203),h=a(1151),y=a(8001),g=a(148),b=a(4055),v=o(a(5921));t.LabelProviderContext=i.default.createContext({labelStyle:[]}),t.LINE_OFFSET=3;const w=c.default(s.default)`
  width: 100vw;
  height: 100vw;
`;t.OverviewMapComponent=e=>{const a=b.useWindow(),[n,r]=i.useState({longitude:-75.6579,latitude:45.3629,zoom:11,bearing:-30,width:a[0],height:a[1],...y.useHash()});i.useEffect((()=>{r((e=>({...e,width:a[0],height:a[1]})))}),[a]);const l=h.useData(),o=Object.values(l).filter((t=>null==t.metadata.filterKey||e.lines[t.metadata.filterKey])).flatMap((e=>{const t=e.metadata.id;return"rail-line"===e.metadata.type?[`${t}-station`,`${t}-labels`]:"rail-yard"===e.metadata.type?[`${t}-labels`]:void 0})),c=m.useIsDarkTheme(e.appTheme),[p,f]=i.useState("satellite"===e.mapStyle?"mapbox://styles/mapbox/satellite-streets-v11":c?"mapbox://styles/mapbox/dark-v10":"mapbox://styles/mapbox/light-v10"),[S,E]=i.useState([]);return i.useEffect((()=>{"satellite"===e.mapStyle?f("mapbox://styles/mapbox/satellite-streets-v11"):f(c?"mapbox://styles/mapbox/dark-v10":"mapbox://styles/mapbox/light-v10")}),[c,e.appTheme,e.mapStyle]),i.useEffect((()=>{var e;E((e=l,["format",["get","name"],{}," ",{},...Object.values(e).filter((e=>null!=e.metadata.icon)).map((e=>e.metadata.id)).sort().flatMap((e=>[["case",["in",e,["get","lines"]],["image",e],""],{}]))]))}),[l]),i.default.createElement(w,Object.assign({mapStyle:p},n,{onViewportChange:t=>{r(t),e.setZoom(t.zoom)},onClick:e=>{var t;null===(t=e.features)||void 0===t||t.forEach((e=>{null!=e.properties.url&&"null"!==e.properties.url&&(window.parent.location.href=`https://www.railfans.ca//${e.properties.url}`)}))},interactiveLayerIds:o,mapboxApiAccessToken:"pk.eyJ1IjoiZGVsbGlzZCIsImEiOiJjam9obzZpMDQwMGQ0M2tsY280OTh2M2o5In0.XtnbkAMU7nIMkq7amsiYdw",scrollZoom:{speed:.25,smooth:!0},mapOptions:{customAttribution:["Data: City of Ottawa"],hash:!0,antiAlias:!1}}),i.default.createElement(t.LabelProviderContext.Provider,{value:{labelStyle:S}},Object.values(l).filter((e=>null!=e.metadata.icon)).map((e=>i.default.createElement(g.MapIcon,{style:p,width:16,height:16,id:e.metadata.id,key:e.metadata.id,url:`icons/${e.metadata.icon}`}))),i.default.createElement(g.MapIcon,{style:p,width:24,height:24,id:"label-background",url:v.default}),i.default.createElement(s.Source,{id:"blank",type:"geojson",data:{type:"FeatureCollection",features:[]}},i.default.createElement(s.Layer,{type:"fill",id:"content-mask",paint:{},layout:{}}),i.default.createElement(s.Layer,{type:"fill",id:"circle-mask",paint:{},layout:{}}),i.default.createElement(s.Layer,{type:"fill",id:"symbol-mask",paint:{},layout:{}})),i.default.createElement(s.Layer,{id:"sky",type:"sky",paint:{"sky-atmosphere-sun":c?[0,95]:[0,0]}}),e.show3DBuildings&&i.default.createElement(s.Layer,Object.assign({id:"3d-buildings",source:"composite"},{"source-layer":"building"},{filter:["==","extrude","true"],type:"fill-extrusion",beforeId:"content-mask",minzoom:15,paint:{"fill-extrusion-color":c?"#212121":"#FFFFFF","fill-extrusion-height":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"fill-extrusion-base":["interpolate",["linear"],["zoom"],15,0,15.05,["get","min_height"]],"fill-extrusion-opacity":.6}})),Object.entries(l).map((([t,a])=>{var n,r,l,o,s;return"rail-line"!==(null===(n=a.metadata)||void 0===n?void 0:n.type)||null!=a.metadata.filterKey&&!e.lines[a.metadata.filterKey]?"rail-yard"!==(null===(o=a.metadata)||void 0===o?void 0:o.type)||null!=a.metadata.filterKey&&!e.lines[a.metadata.filterKey]?void 0:i.default.createElement(u.RailYard,{key:a.metadata.id,name:a.metadata.id,data:a,offset:null!==(s=a.metadata.offset)&&void 0!==s?s:0}):i.default.createElement(d.Line,{data:a,name:a.metadata.id,key:a.metadata.id,offset:null!==(r=a.metadata.offset)&&void 0!==r?r:0,color:null!==(l=a.metadata.color)&&void 0!==l?l:"#212121",highContrastLabels:e.accessibleLabels})}))))};const S={setTargetZoom:p.setTargetZoom,setZoom:p.setZoom};t.OverviewMap=f.connect((e=>({show3DBuildings:e.show3DBuildings,appTheme:e.appTheme,mapStyle:e.mapStyle,lines:e.lines,accessibleLabels:e.accessibleLabels,targetZoom:e.targetZoom})),S)(t.OverviewMapComponent)},3098:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RailYard=void 0;const r=n(a(1593)),l=a(302),o=a(4984);t.RailYard=({name:e,data:t,offset:a})=>r.default.createElement(l.Source,{id:e,type:"geojson",data:t},r.default.createElement(l.Layer,{id:`${e}-tracks`,beforeId:"content-mask",type:"line",filter:["==","type","tracks"],layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#818181","line-width":3,"line-offset":a*o.LINE_OFFSET}}),r.default.createElement(l.Layer,{id:`${e}-labels`,beforeId:"symbol-mask",type:"symbol",filter:["==","type","yard-label"],minzoom:11,layout:{"text-field":["get","name"],"text-anchor":"center","text-optional":!0,"text-font":["Raleway Bold"],"text-size":16,"icon-image":"label-background","icon-text-fit":"both","icon-text-fit-padding":[1,4,0,4]},paint:{"text-color":"#FFFFFF"}}))},7064:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Controls=void 0;const o=l(a(1593)),i=a(8157),s=a(5677),c=a(3150),d=a(3625),u=a(429),p=i.makeStyles((e=>({root:{position:"fixed",right:e.spacing(1),top:e.spacing(1)},share:{marginTop:e.spacing(1)}}))),f={setDrawerOpen:c.setDrawerOpen,setShareSheetOpen:c.setShareSheetOpen};t.Controls=d.connect(null,f)((e=>{const t=p(),[a,n]=o.useState(!1);return o.createElement(o.Fragment,null,o.createElement("div",{className:t.root},o.createElement(i.Paper,null,o.createElement(i.Tooltip,{title:"Map Settings"},o.createElement(i.IconButton,{onClick:()=>e.setDrawerOpen(!0)},o.createElement(s.Layers,null)))),o.createElement(i.Paper,{className:t.share},o.createElement(i.Tooltip,{title:"Share"},o.createElement(i.IconButton,{onClick:()=>e.setShareSheetOpen(!0)},o.createElement(s.Share,null))))),o.createElement(u.ShareSheet,null))}))},4572:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LayerOption=void 0;const r=n(a(1593)),l=a(8157),o=n(a(2398)),i=l.makeStyles((e=>({root:{margin:e.spacing(2),borderRadius:8},header:{marginBottom:e.spacing(1)},button:{display:"flex",flexDirection:"row",justifyContent:"start"},content:{display:"flex",flexDirection:"column",flexGrow:1},selected:{borderWidth:1,borderStyle:"solid",borderColor:e=>e.tint,backgroundColor:e=>l.fade(e.tint,.1)},imagery:{display:"flex",flexGrow:0,flexShrink:0,width:88,height:88,margin:e.spacing(1),borderRadius:"100%",overflow:"hidden",background:e.palette.background.default,filter:"grayscale(1)",transition:e.transitions.create("filter"),"& img":{width:"100%",height:"100%"},border:`1px solid ${e.palette.text.disabled}`},imagerySelected:{filter:"grayscale(0)",borderColor:e=>e.tint}})));t.LayerOption=e=>{var t;const a=l.useTheme(),n=i({tint:null!==(t=e.tint)&&void 0!==t?t:a.palette.secondary.main});return r.default.createElement(l.Card,{className:o.default(n.root,{[n.selected]:e.selected}),variant:"outlined"},r.default.createElement(l.CardActionArea,{className:n.button,onClick:()=>{var t;return null===(t=e.onClick)||void 0===t?void 0:t.call(e)}},e.imageUrl&&r.default.createElement("div",{className:o.default(n.imagery,{[n.imagerySelected]:e.selected})},r.default.createElement("img",{src:e.imageUrl})),r.default.createElement(l.CardContent,{className:n.content},r.default.createElement(l.Typography,{className:n.header,variant:"h6"},e.primary),r.default.createElement(l.Typography,{variant:"body1"},e.secondary))))}},238:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MenuOption=t.SwitchOption=void 0;const r=n(a(1593)),l=a(8157);t.SwitchOption=e=>{const t=()=>{e.onToggle(!e.checked)};return r.default.createElement(l.ListItem,{onClick:t,button:!0},r.default.createElement(l.ListItemText,{primary:e.primary,secondary:e.secondary}),r.default.createElement(l.ListItemSecondaryAction,null,r.default.createElement(l.Switch,{onChange:t,checked:e.checked,edge:"end"})))},t.MenuOption=e=>{const[t,a]=r.default.useState(null);return r.default.createElement(r.default.Fragment,null,r.default.createElement(l.ListItem,{onClick:e=>{a(e.currentTarget)},button:!0},r.default.createElement(l.ListItemText,{primary:e.primary,secondary:e.options[e.value]})),r.default.createElement(l.Menu,{open:null!=t,anchorEl:t},e.options.map(((t,n)=>r.default.createElement(l.MenuItem,{key:t,onClick:()=>(t=>{null==e||e.onChange(t),a(null)})(n),selected:e.value===n},t)))))}},253:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsDrawer=void 0;const r=n(a(1593)),l=a(8157),o=a(3150),i=a(3625),s=a(5677),c=a(4572),d=a(238),u=n(a(8584)),p=n(a(4943)),f=n(a(7400)),m=a(4203),h=l.makeStyles((e=>({drawerPaper:{width:420,[e.breakpoints.down("sm")]:{width:"100%"},boxShadow:e.shadows[4]},closeButton:{marginRight:e.spacing(2)},title:{flexGrow:1,color:e.palette.text.primary},layerCardContainer:{display:"flex",flexGrow:1,height:"100%"},appBar:{backgroundColor:e.palette.background.default,display:"flex",flexGrow:0},sectionHeader:{width:"100%",padding:e.spacing(0,2),margin:e.spacing(2,0,0,0),boxSizing:"border-box",display:"block"}}))),y=["Follow System Settings","Light","Dark"],g={setDrawerOpen:o.setDrawerOpen,setShow3DBuildings:o.setShow3DBuildings,setUseAccessibleLabels:o.setUseAccessibleLabels,setAppTheme:o.setAppTheme,setMapStyle:o.setMapStyle,setShowLine:o.setShowLine};t.SettingsDrawer=i.connect((e=>({open:e.drawerOpen,show3DBuildings:e.show3DBuildings,accessibleLabels:e.accessibleLabels,appTheme:e.appTheme,mapStyle:e.mapStyle,lines:e.lines})),g)((e=>{const t=h();return m.useIsDarkTheme(e.appTheme),r.default.createElement(l.Drawer,{classes:{paper:t.drawerPaper},variant:"persistent",anchor:"right",open:e.open,elevation:4},r.default.createElement(l.AppBar,{className:t.appBar,position:"static"},r.default.createElement(l.Toolbar,null,r.default.createElement(l.IconButton,{className:t.closeButton,edge:"start",onClick:()=>{e.setDrawerOpen(!1)}},r.default.createElement(s.Close,null)),r.default.createElement(l.Typography,{className:t.title,variant:"h6"},"Map Settings"))),r.default.createElement("div",{className:t.layerCardContainer},r.default.createElement(u.default,null,r.default.createElement(l.Typography,{className:t.sectionHeader,variant:"overline"},"O-Train Lines"),r.default.createElement(c.LayerOption,{primary:"Confederation Line",secondary:"Stages 1 and 2 of the Confederation Line, including Belfast and Moodie yards",selected:e.lines.confederationLine,imageUrl:p.default,tint:"#D62937"}),r.default.createElement(c.LayerOption,{primary:"Trillium Line",secondary:"The Trillium Line following the Stage 2 upgrades, including the new Walkley Yard",selected:e.lines.trilliumLine,imageUrl:f.default,tint:"#76BE43"}),r.default.createElement(c.LayerOption,{primary:"Kanata Extension",secondary:"The proposed extension of the Confederation Line into Kanata",selected:e.lines.kanataExtension,onClick:()=>e.setShowLine(["kanataExtension",!e.lines.kanataExtension]),imageUrl:p.default,tint:"#AF882D"}),r.default.createElement(c.LayerOption,{primary:"Barrhaven Extension",secondary:"The proposed alignments and stations of the Confederation Line extension to Barrhaven",selected:e.lines.barrhavenExtension,onClick:()=>e.setShowLine(["barrhavenExtension",!e.lines.barrhavenExtension]),imageUrl:p.default,tint:"#D62937"}),r.default.createElement(l.Divider,null),r.default.createElement(l.Typography,{className:t.sectionHeader,variant:"overline"},"Basemap"),r.default.createElement(c.LayerOption,{primary:"Vector Basemap",secondary:"Basic vector basemap in either light or dark themes",selected:"vector"===e.mapStyle,onClick:()=>e.setMapStyle("vector")}),r.default.createElement(c.LayerOption,{primary:"Satellite Basemap",secondary:"Satellite imagery",selected:"satellite"===e.mapStyle,onClick:()=>e.setMapStyle("satellite")}),r.default.createElement(l.Divider,null),r.default.createElement(l.Typography,{className:t.sectionHeader,variant:"overline"},"Other Settings"),r.default.createElement(l.List,null,r.default.createElement(d.SwitchOption,{primary:"Show 3D buildings",checked:e.show3DBuildings,onToggle:t=>e.setShow3DBuildings(t)}),r.default.createElement(d.MenuOption,{primary:"Choose Theme",options:y,value:(a=e.appTheme,"system"===a?0:"light"===a?1:2),onChange:t=>{switch(t){case 0:e.setAppTheme("system");break;case 1:e.setAppTheme("light");break;case 2:e.setAppTheme("dark")}}})))));var a}))},429:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ShareSheet=void 0;const r=a(8157),l=a(5677),o=n(a(1593)),i=a(3625),s=a(3150),c=r.makeStyles((e=>({closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},shareButton:{textTransform:"none",fontSize:e.typography.body1.fontSize,background:e.palette.background.default,"&:hover":{background:e.palette.background.default},margin:e.spacing(0,3,2,3),maxWidth:"100%"},dialogContent:{listStyle:"none",display:"flex",flexDirection:"column",padding:e.spacing(1,0)},buttonText:{width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}))),d=r.makeStyles((e=>({root:{color:e.palette.text.primary}}))),u=e=>{const t=d(),a=()=>{e.onCheck(!e.checked)};return o.default.createElement(r.ListItem,{button:!0,onClick:a,dense:!0},o.default.createElement(r.ListItemText,{primary:e.primary,secondary:e.secondary}),o.default.createElement(r.ListItemSecondaryAction,null,o.default.createElement(r.Checkbox,{color:"primary",className:t.root,checked:e.checked,edge:"start",onChange:a})))},p={setShareSheetOpen:s.setShareSheetOpen};t.ShareSheet=i.connect((e=>({shareSheetOpen:e.shareSheetOpen,state:e})),p)((e=>{var t;const a=c(),[n,i]=o.default.useState(null),[s,d]=o.default.useState(!0),[p,f]=o.default.useState(!1),[m,h]=o.default.useState(!1),[y,g]=o.default.useState(e.state.lines.kanataExtension),[b,v]=o.default.useState(e.state.lines.barrhavenExtension);o.default.useEffect((()=>{g(e.state.lines.kanataExtension),v(e.state.lines.barrhavenExtension)}),[e.state.lines]);const w=r.useMediaQuery("(prefers-color-scheme: dark)"),S="system"===e.state.appTheme&&w||"dark"===e.state.appTheme,E=()=>{e.setShareSheetOpen(!1)},O=()=>{const t=location.protocol,a=location.host,n=new URL(`${t}//${a}/`);return s&&(n.hash=location.hash),p&&n.searchParams.append("map",e.state.mapStyle),m&&n.searchParams.append("theme",S?"dark":"light"),y&&n.searchParams.append("kanata","true"),b&&n.searchParams.append("barrhaven","true"),n.toString()};return o.default.createElement(o.default.Fragment,null,o.default.createElement(r.Dialog,{fullWidth:!0,maxWidth:"sm",onClose:E,open:null!==(t=e.shareSheetOpen)&&void 0!==t&&t},o.default.createElement(r.DialogTitle,{disableTypography:!0},o.default.createElement(r.Typography,{variant:"h6"},"Share Map"),o.default.createElement(r.IconButton,{className:a.closeButton,onClick:E},o.default.createElement(l.Close,null))),o.default.createElement(r.DialogContent,{className:a.dialogContent},o.default.createElement(r.Button,{className:a.shareButton,onClick:()=>{var e;navigator.share?navigator.share({title:"O-Train Map",url:O()}):navigator.clipboard.writeText&&(e=O(),navigator.clipboard.writeText(e).then((()=>{i("Copied to clipboard")})).catch((()=>{i("Could not copy to clipboard")})))},endIcon:o.default.createElement(l.ContentCopy,null)},o.default.createElement("span",{className:a.buttonText},O())),o.default.createElement(u,{primary:"Current Location",secondary:"Share the map at the current location",checked:s,onCheck:e=>d(e)}),o.default.createElement(u,{primary:"Current Map",secondary:`Share the map using the ${e.state.mapStyle} base map`,checked:p,onCheck:e=>f(e)}),o.default.createElement(u,{primary:"Show Kanata Extension",secondary:"Show the Stage 3 Kanata extension on the shared map",checked:y,onCheck:e=>g(e)}),o.default.createElement(u,{primary:"Show Barrhaven Extension",secondary:"Show the Stage 3 Barrhaven extension on the shared map",checked:b,onCheck:e=>v(e)}))),o.default.createElement(r.Snackbar,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:null!=n,onClose:()=>i(null),message:n,autoHideDuration:2400}))}))},1151:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.useData=t.ProvideData=void 0;const o=l(a(1593)),i=a(5709),s=o.default.createContext({});t.ProvideData=e=>{const t=(()=>{const[e,t]=o.default.useState({});return o.default.useEffect((()=>{Object.entries(i.cities).forEach((([e,a])=>{a.data.forEach((e=>{(async e=>{const t=await fetch(`data/${e}`);if(!t.ok)throw`Could not load ${e}`;return await t.json()})(e).then((a=>t((t=>({...t,[e]:a}))))).catch((e=>console.error(e)))}))}))}),[]),e})();return o.default.createElement(s.Provider,{value:t},e.children)},t.useData=()=>o.useContext(s)},8001:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.useHash=t.ProvideHash=void 0;const o=l(a(1593)),i=o.default.createContext({});t.ProvideHash=e=>{const t=(()=>{const e=window.location.hash;if(0===e.length)return{};const t=e.substring(1).split("/");let a=parseFloat(t[0]),n=parseFloat(t[1]),r=parseFloat(t[2]),l=parseFloat(t[3]),o=NaN;t.length>4&&(o=parseFloat(t[4]));let i={};return isNaN(a)||(i={zoom:a}),isNaN(n)||(i={...i,latitude:n}),isNaN(r)||(i={...i,longitude:r}),isNaN(l)||(i={...i,bearing:l}),isNaN(o)||(i={...i,pitch:o}),i})();return o.default.createElement(i.Provider,{value:t},e.children)},t.useHash=()=>o.useContext(i)},4055:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.useWindow=t.ProvideWindow=void 0;const o=l(a(1593)),i=o.default.createContext([0,0]);t.ProvideWindow=e=>{const t=(()=>{const[e,t]=o.useState([window.innerWidth,window.innerHeight]);return o.useEffect((()=>{window.addEventListener("resize",(()=>{t([window.innerWidth,window.innerHeight])}))}),[]),e})();return o.default.createElement(i.Provider,{value:t},e.children)},t.useWindow=()=>o.useContext(i)},2311:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),a(2611);const r=n(a(1593)),l=n(a(1203)),o=a(7794),i=a(6158),s=o.createGlobalStyle`
  html,
  body {
    height: 100%;
    width: 100%;
    margin: 0;
    padding: 0;
  }

  #content {
    height: 100%;
  }

  ::selection {
    background: #f44336;
  }
`;l.default.render(r.default.createElement(r.default.StrictMode,null,r.default.createElement(s,null),r.default.createElement(i.App,null)),document.getElementById("content"))},9892:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.disableAlternative=t.enableAlternative=t.zoomOut=t.zoomIn=t.setZoom=t.setTargetZoom=t.setShowLine=t.setMapStyle=t.setAppTheme=t.setUseAccessibleLabels=t.setShow3DBuildings=t.setShareSheetOpen=t.setDrawerOpen=void 0;const n=a(7534);t.setDrawerOpen=n.createAction("setDrawerOpen"),t.setShareSheetOpen=n.createAction("setShareSheetOpen"),t.setShow3DBuildings=n.createAction("setShow3DBuildings"),t.setUseAccessibleLabels=n.createAction("setUseAccessibleLabels"),t.setAppTheme=n.createAction("setAppTheme"),t.setMapStyle=n.createAction("setMapStyle"),t.setShowLine=n.createAction("setShowLine"),t.setTargetZoom=n.createAction("setTargetZoom"),t.setZoom=n.createAction("setZoom"),t.zoomIn=n.createAction("zoomIn"),t.zoomOut=n.createAction("zoomOut"),t.enableAlternative=n.createAction("enableAlternative"),t.disableAlternative=n.createAction("disableAlternative")},3150:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),r=this&&this.__exportStar||function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||n(t,e,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(a(9892),t),r(a(4886),t),r(a(4098),t)},4886:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=t.initialState=void 0;const n=a(9892),r=a(7534);t.initialState={drawerOpen:!1,shareSheetOpen:!1,show3DBuildings:!1,accessibleLabels:!1,appTheme:"system",mapStyle:"vector",lines:{confederationLine:!0,trilliumLine:!0,kanataExtension:!1,barrhavenExtension:!1},targetZoom:11,zoom:11,barrhavenAlternatives:["1"]},t.reducer=r.createReducer(t.initialState,(e=>{e.addCase(n.setDrawerOpen,((e,t)=>{e.drawerOpen=t.payload})).addCase(n.setShareSheetOpen,((e,t)=>{e.shareSheetOpen=t.payload})).addCase(n.setShow3DBuildings,((e,t)=>{e.show3DBuildings=t.payload})).addCase(n.setUseAccessibleLabels,((e,t)=>{e.accessibleLabels=t.payload})).addCase(n.setAppTheme,((e,t)=>{e.appTheme=t.payload})).addCase(n.setMapStyle,((e,t)=>{e.mapStyle=t.payload})).addCase(n.setShowLine,((e,t)=>{const[a,n]=t.payload;e.lines[a]=n})).addCase(n.setTargetZoom,((e,t)=>{e.targetZoom=t.payload})).addCase(n.setZoom,((e,t)=>{e.zoom=t.payload})).addCase(n.zoomIn,(e=>{e.targetZoom=e.zoom+.5,e.targetZoom>20&&(e.targetZoom=20)})).addCase(n.zoomOut,(e=>{e.targetZoom=e.zoom-.5,e.targetZoom<0&&(e.targetZoom=0)})).addCase(n.enableAlternative,((e,t)=>{e.barrhavenAlternatives.push(t.payload)})).addCase(n.disableAlternative,((e,t)=>{e.barrhavenAlternatives=e.barrhavenAlternatives.filter((e=>e!==t.payload))}))}))},4098:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})}},t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}a.m=e,a.x=e=>{},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{var e={179:0},t=[[2311,406]],n=e=>{},r=(r,l)=>{for(var o,i,[s,c,d,u]=l,p=0,f=[];p<s.length;p++)i=s[p],a.o(e,i)&&e[i]&&f.push(e[i][0]),e[i]=0;for(o in c)a.o(c,o)&&(a.m[o]=c[o]);for(d&&d(a),r&&r(l);f.length;)f.shift()();return u&&t.push.apply(t,u),n()},l=self.webpackChunkotrainmap=self.webpackChunkotrainmap||[];function o(){for(var n,r=0;r<t.length;r++){for(var l=t[r],o=!0,i=1;i<l.length;i++){var s=l[i];0!==e[s]&&(o=!1)}o&&(t.splice(r--,1),n=a(a.s=l[0]))}return 0===t.length&&(a.x(),a.x=e=>{}),n}l.forEach(r.bind(null,0)),l.push=r.bind(null,l.push.bind(l));var i=a.x;a.x=()=>(a.x=i||(e=>{}),(n=o)())})(),a.x()})();